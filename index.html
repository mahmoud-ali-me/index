<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø±Ø³Ø§Ù„Ø© Ù…ÙØ§Ø¬Ø£Ø©</title>
  <style>
    :root{
      --bg:#071028;
      --card:#0b1220;
      --accent:#38bdf8;
      --muted:#9ca3af;
      --text:#e6eef8;
      --success:#10b981;
    }
    html,body{height:100%}
    body{
      margin:0;
      font-family: "Cairo", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,#071028 0%, #0f172a 100%);
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .wrap{ width:100%; max-width:720px; }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      padding:26px;
      border-radius:14px;
      box-shadow: 0 10px 30px rgba(2,6,23,0.6);
      border:1px solid rgba(255,255,255,0.03);
      text-align:right;
    }
    h1{ margin:0 0 8px; display:flex; align-items:center; gap:10px; font-size:1.4rem; }
    p.lead{ color:var(--muted); margin:6px 0 18px; font-size:0.95rem; }
    .input-row{ display:flex; gap:10px; align-items:center; justify-content:flex-end; margin-bottom:12px; }
    input[type="password"]{
      padding:10px 12px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.06);
      background: rgba(255,255,255,0.01);
      color:var(--text);
      font-size:1rem;
      width:220px;
      text-align:center;
    }
    .btn{
      padding:9px 14px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.06);
      background:transparent;
      color:var(--text);
      cursor:pointer;
      font-size:0.95rem;
    }
    .btn.primary{ background:var(--accent); color:#062431; border:none; box-shadow:0 6px 18px rgba(56,189,248,0.12); }
    .status{ margin-top:10px; color:var(--muted); font-size:0.95rem; min-height:30px; }
    .message{ display:none; margin-top:18px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:18px; border-radius:10px; text-align:right; line-height:1.7; }
    .celebrate{ font-weight:700; color:var(--success); font-size:1.05rem; margin-bottom:8px; display:flex; gap:8px; align-items:center; justify-content:flex-end; }
    .lockout{ color:#fb7185; font-weight:600; }
    .controls{ margin-top:14px; display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end; }
    footer{ margin-top:14px; color:var(--muted); font-size:0.85rem; text-align:right; }
    .confetti{ display:flex; gap:6px; justify-content:flex-end; margin-bottom:10px; font-size:1.1rem; transform:translateY(-4px); }
    @media (max-width:520px){
      input[type="password"]{ width:160px; }
      .card{ padding:16px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="main" aria-live="polite">
      <h1>ğŸ”’ Ø§Ø¯Ø®Ù„ Ø±Ù…Ø² </h1>
      <p class="lead">Ø§ÙƒØªØ¨ Ø±Ù…Ø² Ù…ÙƒÙˆÙ‘Ù† Ù…Ù† 6 Ø£Ø±Ù‚Ø§Ù…. Ø¥Ø°Ø§ ÙƒØªØ¨Øª Ø§Ù„Ø±Ù…Ø² Ø§Ù„ØµØ­ÙŠØ­ Ø³ØªØ¸Ù‡Ø± Ø±Ø³Ø§Ù„Ø©  ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§. Ø¨Ø¹Ø¯ 3 Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø®Ø§Ø·Ø¦Ø© Ø³ÙŠÙÙ…Ù†Ø¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø¤Ù‚ØªÙ‹Ø§ Ù„Ù…Ø¯Ø© 15 Ø³Ø§Ø¹Ø©.</p>

      <div class="input-row">
        <input id="pwd" type="password" inputmode="numeric" pattern="\d{6}" maxlength="6" placeholder="Ø±Ù…Ø² Ù…ÙƒÙˆÙ‘Ù† Ù…Ù† 6 Ø£Ø±Ù‚Ø§Ù…" aria-label="Ø±Ù…Ø² ğŸª¦â€ />
        <button class="btn primary" id="submitBtn">ØªØ­Ù‚Ù‚</button>
      </div>

      <div class="status" id="status"> </div>

      <div class="message" id="message">
        <div class="confetti">the ğŸª¦</div>
        <div class="celebrate">Ø§Ù„Ø±Ø³Ø§Ù„Ù‡ Ù…ÙØªÙˆØ­Ù‡</div>
        <p style="margin:0 0 6px;">          Ø­ÙŠØ§ØªÙŠ Ù…ÙƒÙ†ØªØ´ Ù‡ØªÙ†ÙØ¹ ÙˆØ§Ù†ØªÙŠ Ù…Ø´ ÙÙŠÙ‡Ø§ ÙØ§ Ø§Ø®ØªØ±Øª Ø§Ù†ÙŠ Ø§Ù†Ù‡ÙŠÙ‡Ø§ Ø¨Ø¹Ø¯ Ù…Ø§ Ø´Ù„ØªÙŠÙ†ÙŠ Ù…Ù† Ù‚Ù„Ø¨Ùƒ Ùˆ ÙˆØµÙŠØªÙŠ Ø§Ù†Ù‡Ù… ÙŠØºØ³Ù„ÙˆÙ†ÙŠ Ø¨Ø¯Ø¨Ù„ØªÙŠ Ùˆ ÙŠØ¯ÙÙˆÙ†ÙŠÙ†ÙŠ Ø¨ÙŠÙ‡Ø§ Ø¹Ù„Ø´Ø§Ù† ØªÙƒÙˆÙ† Ù…Ø¹Ø§ÙŠÙ‡ Ùˆ Ù…Ø·Ù…Ù†Ø§Ù†ÙŠ ÙˆØ§Ù†Ø§ Ù„ÙˆØ­Ø¯ÙŠ Ùˆ Ù…Ø´ Ù…Ø³Ø§Ù…Ø­ Ø§ÙŠ Ø­Ø¯ ÙŠØ´Ù„Ù‡Ø§ Ù…Ù† Ø§ÙŠØ¯ÙŠ

        </p>
 </div>

      <div class="controls">
        <button class="btn" id="resetAttemptsBtn">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª (Ù…Ø³Ø­)</button>
        <button class="btn" id="clearLockBtn">Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù‚ÙÙ„ Ù…Ø¤Ù‚ØªÙ‹Ø§</button>
      </div>

      <footer>
        Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„ØµØ­ÙŠØ­Ø© Ù…Ø­ÙÙˆØ¸Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙØ­Ø©. Ø¥Ø°Ø§ Ø§Ø­ØªØ¬Øª Ø£ØºÙŠØ± Ø§Ù„Ù†Øµ Ø£Ùˆ Ø£Ø²ÙŠØ¯ Ø±Ù…ÙˆØ² Ø£Ø®Ø¨Ø±Ù†ÙŠ.
      </footer>
    </div>
  </div>

  <script>
    // ======= Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ =======
    const VALID_CODES = ["542005","281124","121224"]; // Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„ØµØ­ÙŠØ­Ø©
    const STORAGE_ATTEMPTS_KEY = "locked_msg_attempts_v1";
    const STORAGE_LOCKUNTIL_KEY = "locked_msg_lockuntil_v1";
    const MAX_ATTEMPTS = 3;
    const LOCKOUT_MS = 15 * 60 * 60 * 1000; // <-- 15 Ø³Ø§Ø¹Ø© Ø¨Ø§Ù„Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ©
    // =====================================

    const pwdEl = document.getElementById("pwd");
    const submitBtn = document.getElementById("submitBtn");
    const statusEl = document.getElementById("status");
    const messageEl = document.getElementById("message");
    const resetBtn = document.getElementById("resetAttemptsBtn");
    const clearLockBtn = document.getElementById("clearLockBtn");

    // Ù…Ø³Ø§Ø¹Ø¯Ø©: Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† localStorage
    function getAttempts(){
      return parseInt(localStorage.getItem(STORAGE_ATTEMPTS_KEY) || "0", 10);
    }
    function setAttempts(n){
      localStorage.setItem(STORAGE_ATTEMPTS_KEY, String(n));
    }
    function resetAttempts(){
      setAttempts(0);
    }

    function getLockUntil(){
      const v = localStorage.getItem(STORAGE_LOCKUNTIL_KEY);
      return v ? parseInt(v,10) : null;
    }
    function setLockUntil(ts){
      localStorage.setItem(STORAGE_LOCKUNTIL_KEY, String(ts));
    }
    function clearLock(){
      localStorage.removeItem(STORAGE_LOCKUNTIL_KEY);
    }

    // ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ Ù…Ù‚ÙÙˆÙ„ Ø§Ù„Ø¢Ù†
    function isLocked(){
      const until = getLockUntil();
      return until && Date.now() < until;
    }

    // Ø¹Ø±Ø¶ Ø¨Ø§Ù‚ÙŠ Ø§Ù„ÙˆÙ‚Øª ÙÙŠ Ø§Ù„Ù‚ÙÙ„ (Ø³Ø§Ø¹Ø§Øª/Ø¯Ù‚Ø§Ø¦Ù‚/Ø«ÙˆØ§Ù†ÙŠ)
    function formatDuration(ms){
      const totalSec = Math.max(0, Math.floor(ms/1000));
      const hours = Math.floor(totalSec / 3600);
      const minutes = Math.floor((totalSec % 3600) / 60);
      const seconds = totalSec % 60;
      const parts = [];
      if (hours > 0) parts.push(hours + " Ø³Ø§Ø¹Ø©");
      if (minutes > 0) parts.push(minutes + " Ø¯Ù‚ÙŠÙ‚Ø©");
      parts.push(seconds + " Ø«Ø§Ù†ÙŠØ©");
      return parts.join("ØŒ ");
    }

    // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø­Ø§Ù„Ø©
    function updateStatus(){
      if (isLocked()){
        const until = getLockUntil();
        const remain = until - Date.now();
        statusEl.innerHTML = `<span class="lockout">âœ‹ ØªÙ… Ù‚ÙÙ„ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª â€” Ø§Ù†ØªØ¸Ø± ${formatDuration(remain)} Ø«Ù… Ø¬Ø±Ù‘Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.</span>`;
        submitBtn.disabled = true;
        pwdEl.disabled = true;
        return;
      } else {
        submitBtn.disabled = false;
        pwdEl.disabled = false;
      }

      const att = getAttempts();
      if (att > 0){
        statusEl.textContent = `Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø®Ø§Ø·Ø¦Ø©: ${att} / ${MAX_ATTEMPTS}`;
      } else {
        statusEl.textContent = "";
      }
    }

    // ÙØªØ­ Ø§Ù„Ø±Ø³Ø§Ù„Ø© (Ù†Ø¬Ø§Ø­)
    function openMessage(){
      messageEl.style.display = "block";
      statusEl.textContent = "âœ…!";
      resetAttempts();
      clearLock();
      pwdEl.value = "";
      submitBtn.disabled = true;
      pwdEl.disabled = true;
    }

    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªØ­Ù‚Ù‚
    function handleCheck(){
      if (isLocked()){
        updateStatus();
        return;
      }

      const val = (pwdEl.value || "").trim();
      if (!/^\d{6}$/.test(val)){
        statusEl.textContent = "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² Ù…ÙƒÙˆÙ‘Ù† Ù…Ù† 6 Ø£Ø±Ù‚Ø§Ù….";
        return;
      }

      // ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµØ­Ø©
      if (VALID_CODES.includes(val)){
        openMessage();
        return;
      }

      // Ø®Ø§Ø·Ø¦
      let attempts = getAttempts();
      attempts += 1;
      setAttempts(attempts);

      if (attempts >= MAX_ATTEMPTS){
        const until = Date.now() + LOCKOUT_MS;
        setLockUntil(until);
        statusEl.innerHTML = `<span class="lockout">ØªÙ… ØªØ¬Ø§ÙˆØ² Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª. Ø§Ù†ØªØ¸Ø± ${formatDuration(LOCKOUT_MS)} Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø¬Ø¯Ø¯Ù‹Ø§.</span>`;
        submitBtn.disabled = true;
        pwdEl.disabled = true;
        startLockCountdown();
      } else {
        statusEl.textContent = `Ø±Ù…Ø² Ø®Ø§Ø·Ø¦. Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª: ${attempts} / ${MAX_ATTEMPTS}`;
      }
    }

    // Ø¹Ø¯Ø§Ø¯ Ù„Ù„Ù‚ÙÙ„ Ù„Ø¹Ø±Ø¶ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ ÙƒÙ„ Ø«Ø§Ù†ÙŠØ©
    let lockInterval = null;
    function startLockCountdown(){
      if (lockInterval) clearInterval(lockInterval);
      lockInterval = setInterval(function(){
        if (!isLocked()){
          clearInterval(lockInterval);
          lockInterval = null;
          updateStatus();
          return;
        }
        updateStatus();
      }, 1000);
    }

    // Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ…
    submitBtn.addEventListener("click", handleCheck);
    pwdEl.addEventListener("keydown", function(e){
      if (e.key === "Enter") handleCheck();
    });

    resetBtn.addEventListener("click", function(){
      resetAttempts();
      clearLock();
      messageEl.style.display = "none";
      pwdEl.value = "";
      updateStatus();
    });

    clearLockBtn.addEventListener("click", function(){
      clearLock();
      resetAttempts();
      updateStatus();
    });

    // Ø¨Ø¯Ø¡ Ø§Ù„Ø­Ø§Ù„Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    (function init(){
      updateStatus();
      if (isLocked()) startLockCountdown();
    })();
  </script>
</body>
</html>
